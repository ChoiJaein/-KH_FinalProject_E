<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
  <mapper namespace="boardMapper">
      
 
       <select id ="listCount" resultType="int">
      <![CDATA[
          SELECT COUNT(bid)
          FROM BOARD
          WHERE BID > 0
          ]]>
       </select>
       <!-- 검색 -->
		<select id="listSearch" resultType="BoardDTO" parameterType="SearchCriteria">
				SELECT BID, BTITLE, BCONTENT, ACCOUNTID, PCONDITION,PRICE,DEALMETHOD
				 FROM (
				        SELECT  BID, BTITLE, BCONTENT, ACCOUNTID, PCONDITION,PRICE,DEALMETHOD,
				        ROW_NUMBER() OVER(ORDER BY BID DESC) AS rNum
				        FROM Board
				        WHERE 1=1
				        AND BTITLE LIKE '%' || #{ keyword } || '%'
				      ) board
				    WHERE rNum BETWEEN #{rowStart} AND #{rowEnd}
		</select>

		<select id="countSearch" resultType="int">
		<![CDATA[
		   SELECT COUNT(BID)
		   FROM BOARD
		   WHERE BID > 0
		  ]]>
           </select>
           

  </mapper>
