<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
<mapper namespace="InfoMapper">
	<select id="selectUserDatas" resultType="infoDto">
	   SELECT A.ACCOUNTID as accId
		  , A.NAME as name
		  , TRUNC(SYSDATE) - TRUNC(A.REGISTERDATE) as regDate
		  , CONCAT(P.URL, '/' || P.UUIDNAME) as url
			FROM ACCOUNT A
			RIGHT JOIN PHOTOUPLOAD P
			ON A.ACCOUNTID = P.ACCOUNTID 
			WHERE A.ACCOUNTID = ${accId} AND P.URL = '/static/account/upload'

	</select>
	<select id="selectPurchaseCount" resultType="infoDto">
		SELECT BUYSTATUS as buyStatus
			 , COUNT(*) as num
		  FROM BOARD 
		 WHERE BUYSTATUS = ${accId}
		 GROUP BY BUYSTATUS
	</select>
</mapper>